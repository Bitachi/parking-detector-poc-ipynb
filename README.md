# parking-detector-poc-ipynb

## プログラムの説明
　[YouTube動画](https://www.youtube.com/watch?v=ppkxWs5dBo8&t=6366s&ab_channel=%E3%82%A2%E3%82%AD%E3%83%90%E3%82%AC%E3%82%B8%E3%82%A7%E3%83%83%E3%83%88)を入力とし、1秒につき1フレームを切り取り自動車検知処理をします。冒頭の180秒で処理を止めるようにしています。
 
検知された自動車のうち、10秒以上停止しているものを判定し、csvへ出力します。

また、1秒ごとに自動車と検知された物体、及び10秒以上停止していると判定された物体を四角形で囲んだ画像を出力します。

## 実行方法
1. 前準備
上から1,2,3,4番目のコマンドを実行してください。


2. 上から5番目を実行します。
約4分ほどかかります。

## 出力結果


- 画像（/content/images/yolov8m）
1秒毎にフレーム画像を出力します。検知した物体に四角形を描画します。
  - 緑色の四角形
    - YOLOモデルが自動車と検知した物体を表します
  - 赤い四角形
    - 自動車と検知された物体のうち、「10s以上停止している」と判定されたものを表します 
- CSV（/content/stopped_vehicles.csv）
「10s以上停止している」と判定された物体を一覧化しています。
  - ID
    - 検知された各自動車を識別する値
  - Start_Second
    - 停止判定の開始秒
  - End_Second
    - 停止判定の終了秒

## 課題
- 誤検知が多い
  - 例えば、ビルの窓や信号機が自動車として検知されてしまう
  - 解決策：YOLOv8モデルを転移学習し自動車の検知精度を上げることや、入力動画の画質をあげることが挙げられる
- （要件次第）処理が遅い
  - 180秒の動画処理に4分もかかってしまう
  - 解決策：より軽量なYOLOモデルを検討する、処理するフレームを減らす（5秒に1フレームなど）
